<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Namibia HR System - Login</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Inter', sans-serif;
            background: #f8fafc;
            color: #334155;
            line-height: 1.6;
            overflow: hidden;
        }
        
        /* Login/Signup Screen Styles */
        .auth-container {
            display: flex;
            min-height: 100vh;
        }
        .auth-image {
            flex: 1;
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            padding: 40px;
            position: relative;
            overflow: hidden;
        }
        .auth-image::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://images.unsplash.com/photo-1552664730-d307ca884978?ixlib=rb-4.0.3&auto=format&fit=crop&w=1950&q=80');
            background-size: cover;
            background-position: center;
            opacity: 0.2;
            z-index: 0;
        }
        .auth-image-content {
            position: relative;
            z-index: 1;
            text-align: center;
            max-width: 500px;
        }
        .auth-image h1 {
            font-size: 42px;
            font-weight: 700;
            margin-bottom: 20px;
        }
        .auth-image p {
            font-size: 18px;
            opacity: 0.9;
            line-height: 1.8;
        }
        .auth-form-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }
        .auth-form {
            width: 100%;
            max-width: 400px;
        }
        .auth-form h2 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 10px;
            color: #1e293b;
        }
        .auth-form p {
            color: #64748b;
            margin-bottom: 30px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
            color: #374151;
        }
        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }
        .form-control:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2);
        }
        .login-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        .remember-me {
            display: flex;
            align-items: center;
        }
        .remember-me input {
            margin-right: 8px;
        }
        .forgot-password {
            color: #4f46e5;
            font-size: 14px;
            font-weight: 500;
            text-decoration: none;
        }
        .forgot-password:hover {
            text-decoration: underline;
        }
        .btn {
            width: 100%;
            padding: 14px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            font-size: 16px;
        }
        .btn-primary {
            background: #4f46e5;
            color: white;
        }
        .btn-primary:hover {
            background: #4338ca;
        }
        .btn-secondary {
            background: #f1f5f9;
            color: #64748b;
            border: 1px solid #d1d5db;
        }
        .btn-secondary:hover {
            background: #e2e8f0;
        }
        .user-type {
            display: flex;
            margin-bottom: 24px;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #d1d5db;
        }
        .user-type-option {
            flex: 1;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            background: #f8fafc;
            transition: all 0.3s;
        }
        .user-type-option.active {
            background: #e0e7ff;
            color: #4f46e5;
            font-weight: 500;
        }
        .user-type-option:first-child {
            border-right: 1px solid #d1d5db;
        }
        .auth-footer {
            text-align: center;
            margin-top: 30px;
            color: #64748b;
            font-size: 14px;
        }
        .auth-footer a {
            color: #4f46e5;
            text-decoration: none;
            font-weight: 500;
        }
        .auth-footer a:hover {
            text-decoration: underline;
        }
        .auth-toggle {
            text-align: center;
            margin-top: 20px;
            color: #64748b;
            font-size: 14px;
        }
        .auth-toggle a {
            color: #4f46e5;
            text-decoration: none;
            font-weight: 500;
        }
        .auth-toggle a:hover {
            text-decoration: underline;
        }
        
        /* Signup specific styles */
        .signup-form {
            display: none;
        }
        .signup-form.active {
            display: block;
        }
        .login-form.active {
            display: block;
        }
        .login-form {
            display: none;
        }
        .password-strength {
            margin-top: 8px;
            height: 4px;
            background: #e5e7eb;
            border-radius: 2px;
            overflow: hidden;
        }
        .password-strength-bar {
            height: 100%;
            width: 0;
            transition: all 0.3s;
        }
        .password-strength-bar.weak {
            width: 33%;
            background: #ef4444;
        }
        .password-strength-bar.medium {
            width: 66%;
            background: #f59e0b;
        }
        .password-strength-bar.strong {
            width: 100%;
            background: #10b981;
        }
        .password-requirements {
            margin-top: 8px;
            font-size: 12px;
            color: #64748b;
        }
        .requirement {
            display: flex;
            align-items: center;
            margin-bottom: 4px;
        }
        .requirement i {
            margin-right: 6px;
            font-size: 10px;
        }
        .requirement.met {
            color: #10b981;
        }
        .requirement.met i {
            color: #10b981;
        }
        .department-position-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        
        /* Error message */
        .error-message {
            color: #dc2626;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        /* Success message */
        .success-message {
            background: #dcfce7;
            color: #16a34a;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }
        
        /* Database Status */
        .db-status {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            z-index: 1000;
            display: flex;
            align-items: center;
        }
        .db-status i {
            margin-right: 6px;
        }
        
        /* Dashboard Styles (hidden until login) */
        .dashboard-container {
            display: none;
            min-height: 100vh;
        }
        .container {
            display: flex;
            min-height: 100vh;
        }
        /* Sidebar Styles */
        .sidebar {
            width: 260px;
            background: linear-gradient(180deg, #4f46e5 0%, #3730a3 100%);
            color: white;
            padding: 20px 0;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
        }
        .logo {
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }
        .logo h1 {
            font-size: 24px;
            font-weight: 700;
        }
        .logo p {
            font-size: 14px;
            opacity: 0.8;
        }
        .nav-links {
            flex: 1;
        }
        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            margin: 6px 0;
            border-left: 4px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
        }
        .nav-item:hover, .nav-item.active {
            background: rgba(255, 255, 255, 0.1);
            border-left-color: white;
        }
        .nav-item i {
            margin-right: 12px;
            font-size: 18px;
            width: 24px;
            text-align: center;
        }
        .nav-item.hr-only {
            display: none;
        }
        .user-profile {
            padding: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
        }
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-right: 12px;
        }
        .user-info {
            flex: 1;
        }
        .user-info .name {
            font-weight: 600;
        }
        .user-info .role {
            font-size: 12px;
            opacity: 0.8;
        }
        .logout-btn {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 16px;
        }
        
        /* Main Content Styles */
        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: none;
        }
        .main-content.active {
            display: block;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        .page-title h2 {
            font-size: 24px;
            font-weight: 700;
            color: #1e293b;
        }
        .page-title p {
            color: #64748b;
            font-size: 14px;
        }
        .header-actions {
            display: flex;
            gap: 12px;
        }
        .search-bar {
            display: flex;
            align-items: center;
            background: white;
            border-radius: 8px;
            padding: 8px 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .search-bar input {
            border: none;
            outline: none;
            padding: 4px 8px;
            width: 200px;
        }
        .notification-btn {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            position: relative;
            cursor: pointer;
        }
        .notification-btn::after {
            content: "";
            position: absolute;
            top: 8px;
            right: 8px;
            width: 8px;
            height: 8px;
            background: #ef4444;
            border-radius: 50%;
        }
        
        /* Dashboard Content */
        .welcome-banner {
            background: linear-gradient(120deg, #4f46e5, #7c3aed);
            border-radius: 12px;
            padding: 24px;
            color: white;
            margin-bottom: 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .welcome-text h3 {
            font-size: 20px;
            margin-bottom: 8px;
        }
        .welcome-text p {
            opacity: 0.9;
        }
        .quick-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }
        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            transition: transform 0.3s ease;
        }
        .stat-card:hover {
            transform: translateY(-5px);
        }
        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
            font-size: 20px;
        }
        .stat-1 { background: #f0f9ff; color: #0369a1; }
        .stat-2 { background: #fef2f2; color: #dc2626; }
        .stat-3 { background: #f0fdf4; color: #16a34a; }
        .stat-4 { background: #fffbeb; color: #d97706; }
        .stat-info h4 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        .stat-info p {
            font-size: 14px;
            color: #64748b;
        }
        .dashboard-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 24px;
        }
        .card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 24px;
        }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .card-title {
            font-size: 18px;
            font-weight: 600;
        }
        .view-all {
            color: #4f46e5;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
        }
        .quick-links {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }
        .link-card {
            background: #f8fafc;
            border-radius: 8px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }
        .link-card:hover {
            background: #f1f5f9;
            transform: translateY(-2px);
        }
        .link-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 12px;
            font-size: 20px;
            background: #e0e7ff;
            color: #4f46e5;
        }
        .link-card h4 {
            font-size: 16px;
            margin-bottom: 4px;
        }
        .link-card p {
            font-size: 13px;
            color: #64748b;
        }
        .activity-item {
            display: flex;
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid #f1f5f9;
        }
        .activity-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            background: #f1f5f9;
            color: #4f46e5;
        }
        .activity-content {
            flex: 1;
        }
        .activity-content h4 {
            font-size: 14px;
            margin-bottom: 4px;
        }
        .activity-content p {
            font-size: 12px;
            color: #64748b;
        }
        .activity-time {
            font-size: 12px;
            color: #94a3b8;
        }
        .leave-balance {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .balance-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .balance-info {
            display: flex;
            align-items: center;
        }
        .balance-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            background: #f1f5f9;
            color: #4f46e5;
        }
        .balance-details h4 {
            font-size: 14px;
            margin-bottom: 2px;
        }
        .balance-details p {
            font-size: 12px;
            color: #64748b;
        }
        .balance-days {
            font-weight: 700;
            color: #4f46e5;
        }
        .upcoming-item {
            display: flex;
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid #f1f5f9;
        }
        .upcoming-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        .upcoming-date {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            background: #4f46e5;
            color: white;
            font-weight: 600;
        }
        .upcoming-date .day {
            font-size: 16px;
            line-height: 1;
        }
        .upcoming-date .month {
            font-size: 12px;
            text-transform: uppercase;
        }
        .upcoming-details h4 {
            font-size: 14px;
            margin-bottom: 4px;
        }
        .upcoming-details p {
            font-size: 12px;
            color: #64748b;
        }
        .status-badge {
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            margin-top: 4px;
            display: inline-block;
        }
        .status-approved {
            background: #dcfce7;
            color: #16a34a;
        }
        .status-pending {
            background: #fef3c7;
            color: #d97706;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background: white;
            border-radius: 12px;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        .modal-header {
            padding: 20px 24px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .modal-title {
            font-size: 18px;
            font-weight: 600;
        }
        .close-modal {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #64748b;
        }
        .modal-body {
            padding: 24px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 6px;
            color: #374151;
        }
        .form-control {
            width: 100%;
            padding: 10px 14px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 14px;
        }
        .form-control:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2);
        }
        .modal-footer {
            padding: 20px 24px;
            border-top: 1px solid #e2e8f0;
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }
        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-primary {
            background: #4f46e5;
            color: white;
            border: none;
        }
        .btn-primary:hover {
            background: #4338ca;
        }
        .btn-secondary {
            background: #f1f5f9;
            color: #64748b;
            border: none;
        }
        .btn-secondary:hover {
            background: #e2e8f0;
        }
        
        /* Notification Dropdown */
        .notification-dropdown {
            position: absolute;
            top: 50px;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            width: 320px;
            z-index: 1001;
            display: none;
        }
        .notification-header {
            padding: 16px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .notification-title {
            font-weight: 600;
        }
        .notification-list {
            max-height: 300px;
            overflow-y: auto;
        }
        .notification-item {
            padding: 12px 16px;
            border-bottom: 1px solid #f1f5f9;
            cursor: pointer;
            transition: background 0.2s;
        }
        .notification-item:hover {
            background: #f8fafc;
        }
        .notification-item:last-child {
            border-bottom: none;
        }
        .notification-content h4 {
            font-size: 14px;
            margin-bottom: 4px;
        }
        .notification-content p {
            font-size: 12px;
            color: #64748b;
        }
        .notification-time {
            font-size: 11px;
            color: #94a3b8;
            margin-top: 4px;
        }
        .notification-footer {
            padding: 12px 16px;
            text-align: center;
            font-size: 14px;
            color: #4f46e5;
            font-weight: 500;
            cursor: pointer;
        }
        
        /* Employee Directory Styles */
        .employee-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        .employee-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transition: transform 0.3s ease;
        }
        .employee-card:hover {
            transform: translateY(-5px);
        }
        .employee-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #e0e7ff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: 600;
            color: #4f46e5;
            margin-bottom: 16px;
        }
        .employee-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 4px;
        }
        .employee-position {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 12px;
        }
        .employee-details {
            width: 100%;
            text-align: left;
        }
        .employee-detail {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 14px;
        }
        .employee-detail i {
            width: 20px;
            color: #64748b;
            margin-right: 8px;
        }
        .employee-actions {
            display: flex;
            margin-top: 16px;
            gap: 8px;
        }
        .employee-actions button {
            flex: 1;
            padding: 8px;
            border-radius: 6px;
            border: none;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
        }
        .btn-message {
            background: #f0f9ff;
            color: #0369a1;
        }
        .btn-view {
            background: #e0e7ff;
            color: #4f46e5;
        }
        
        /* Leave Management Styles */
        .leave-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #e2e8f0;
        }
        .leave-tab {
            padding: 12px 20px;
            font-weight: 500;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            margin-bottom: -1px;
        }
        .leave-tab.active {
            color: #4f46e5;
            border-bottom-color: #4f46e5;
        }
        .leave-tab-content {
            display: none;
        }
        .leave-tab-content.active {
            display: block;
        }
        .leave-request-item {
            display: flex;
            padding: 16px;
            border-radius: 8px;
            background: #f8fafc;
            margin-bottom: 12px;
        }
        .leave-request-info {
            flex: 1;
        }
        .leave-request-info h4 {
            font-size: 16px;
            margin-bottom: 4px;
        }
        .leave-request-info p {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 8px;
        }
        .leave-request-actions {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .leave-request-actions button {
            padding: 6px 12px;
            border-radius: 6px;
            border: none;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
        }
        .btn-approve {
            background: #dcfce7;
            color: #16a34a;
        }
        .btn-reject {
            background: #fee2e2;
            color: #dc2626;
        }
        
        /* Payroll Styles */
        .payslip-filters {
            display: flex;
            gap: 16px;
            margin-bottom: 20px;
        }
        .payslip-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .payslip-item {
            background: white;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .payslip-info h4 {
            font-size: 16px;
            margin-bottom: 4px;
        }
        .payslip-info p {
            font-size: 14px;
            color: #64748b;
        }
        .payslip-amount {
            font-size: 18px;
            font-weight: 700;
            color: #16a34a;
        }
        .payslip-actions {
            display: flex;
            gap: 8px;
        }
        
        /* Performance Styles */
        .performance-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }
        .performance-metric {
            background: white;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        .metric-value {
            font-size: 24px;
            font-weight: 700;
            color: #4f46e5;
            margin-bottom: 4px;
        }
        .metric-label {
            font-size: 14px;
            color: #64748b;
        }
        .review-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .review-item {
            background: white;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .review-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        .review-title {
            font-weight: 600;
        }
        .review-date {
            font-size: 14px;
            color: #64748b;
        }
        .review-rating {
            display: flex;
            margin-bottom: 12px;
        }
        .review-rating i {
            color: #fbbf24;
            margin-right: 2px;
        }
        .review-comments {
            font-size: 14px;
            color: #64748b;
        }
        
        /* Recruitment Styles */
        .job-filters {
            display: flex;
            gap: 16px;
            margin-bottom: 20px;
        }
        .job-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .job-item {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .job-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        .job-title {
            font-size: 18px;
            font-weight: 600;
        }
        .job-department {
            background: #e0e7ff;
            color: #4f46e5;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }
        .job-details {
            display: flex;
            gap: 16px;
            margin-bottom: 12px;
        }
        .job-detail {
            display: flex;
            align-items: center;
            font-size: 14px;
            color: #64748b;
        }
        .job-detail i {
            margin-right: 6px;
        }
        .job-description {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 16px;
        }
        .job-actions {
            display: flex;
            gap: 8px;
        }
        
        /* Settings Styles */
        .settings-section {
            margin-bottom: 24px;
        }
        .settings-section h3 {
            font-size: 18px;
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 1px solid #e2e8f0;
        }
        .settings-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f1f5f9;
        }
        .settings-item:last-child {
            border-bottom: none;
        }
        .settings-info h4 {
            font-size: 16px;
            margin-bottom: 4px;
        }
        .settings-info p {
            font-size: 14px;
            color: #64748b;
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #4f46e5;
        }
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 16px 20px;
            display: flex;
            align-items: center;
            z-index: 1002;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
        }
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        .toast-icon {
            margin-right: 12px;
            font-size: 20px;
        }
        .toast-success .toast-icon {
            color: #16a34a;
        }
        .toast-error .toast-icon {
            color: #dc2626;
        }
        .toast-info .toast-icon {
            color: #0369a1;
        }
        .toast-message {
            font-size: 14px;
        }
        
        /* Database Info Panel */
        .db-info-panel {
            position: fixed;
            bottom: 60px;
            right: 10px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 15px;
            width: 300px;
            z-index: 999;
            display: none;
            border: 1px solid #e2e8f0;
        }
        .db-info-panel h3 {
            font-size: 16px;
            margin-bottom: 10px;
            color: #1e293b;
        }
        .db-info-panel .db-stat {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }
        .db-info-panel .db-stat-label {
            color: #64748b;
        }
        .db-info-panel .db-stat-value {
            font-weight: 600;
            color: #4f46e5;
        }
        .db-info-panel .db-actions {
            margin-top: 15px;
            display: flex;
            gap: 8px;
        }
        .db-info-panel .db-actions button {
            flex: 1;
            padding: 6px 10px;
            border-radius: 4px;
            border: none;
            font-size: 12px;
            cursor: pointer;
        }
        .db-toggle-btn {
            background: #f1f5f9;
            color: #64748b;
        }
        .db-export-btn {
            background: #e0e7ff;
            color: #4f46e5;
        }
        .db-clear-btn {
            background: #fee2e2;
            color: #dc2626;
        }
        
        /* Responsive Styles */
        @media (max-width: 1024px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }
        @media (max-width: 768px) {
            .auth-container {
                flex-direction: column;
            }
            .auth-image {
                min-height: 200px;
            }
            .department-position-group {
                grid-template-columns: 1fr;
            }
            .container {
                flex-direction: column;
            }
            .sidebar {
                width: 100%;
                padding: 10px;
            }
            .nav-links {
                display: flex;
                overflow-x: auto;
                margin-bottom: 10px;
            }
            .nav-item {
                border-left: none;
                border-bottom: 4px solid transparent;
                flex-direction: column;
                padding: 10px;
                margin: 0 5px;
                min-width: 80px;
            }
            .nav-item:hover, .nav-item.active {
                border-left-color: transparent;
                border-bottom-color: white;
            }
            .nav-item i {
                margin-right: 0;
                margin-bottom: 5px;
            }
            .nav-item span {
                font-size: 12px;
            }
            .quick-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            .quick-links {
                grid-template-columns: 1fr;
            }
            .db-info-panel {
                width: 250px;
                bottom: 50px;
                right: 5px;
            }
        }
        @media (max-width: 480px) {
            .quick-stats {
                grid-template-columns: 1fr;
            }
            .header {
                flex-direction: column;
                align-items: flex-start;
            }
            .header-actions {
                margin-top: 16px;
                width: 100%;
            }
            .search-bar {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Database Status Indicator -->
    <div class="db-status" id="dbStatus">
        <i class="fas fa-database"></i>
        <span>In-Memory DB Active</span>
    </div>
    
    <!-- Database Info Panel -->
    <div class="db-info-panel" id="dbInfoPanel">
        <h3>Database Statistics</h3>
        <div class="db-stat">
            <span class="db-stat-label">Users:</span>
            <span class="db-stat-value" id="dbUserCount">0</span>
        </div>
        <div class="db-stat">
            <span class="db-stat-label">Employees:</span>
            <span class="db-stat-value" id="dbEmployeeCount">0</span>
        </div>
        <div class="db-stat">
            <span class="db-stat-label">Leave Requests:</span>
            <span class="db-stat-value" id="dbLeaveCount">0</span>
        </div>
        <div class="db-stat">
            <span class="db-stat-label">Payslips:</span>
            <span class="db-stat-value" id="dbPayslipCount">0</span>
        </div>
        <div class="db-stat">
            <span class="db-stat-label">Reviews:</span>
            <span class="db-stat-value" id="dbReviewCount">0</span>
        </div>
        <div class="db-stat">
            <span class="db-stat-label">Job Postings:</span>
            <span class="db-stat-value" id="dbJobCount">0</span>
        </div>
        <div class="db-actions">
            <button class="db-toggle-btn" onclick="toggleDbInfo()">Hide</button>
            <button class="db-export-btn" onclick="exportDbData()">Export</button>
            <button class="db-clear-btn" onclick="clearDbData()">Clear</button>
        </div>
    </div>
    
    <!-- Login/Signup Screen -->
    <div class="auth-container" id="authScreen">
        <div class="auth-image">
            <div class="auth-image-content">
                <h1>NamHR System</h1>
                <p>Comprehensive HR management solution for Namibian businesses. Streamline your HR processes with our intuitive platform.</p>
            </div>
        </div>
        <div class="auth-form-container">
            <!-- Login Form -->
            <form class="auth-form login-form active" id="loginForm">
                <h2>Welcome Back</h2>
                <p>Please sign in to your account</p>
                
                <div class="user-type">
                    <div class="user-type-option active" data-type="employee">Employee</div>
                    <div class="user-type-option" data-type="hr">HR Admin</div>
                </div>
                
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" class="form-control" id="email" placeholder="Enter your email" required>
                    <div class="error-message" id="emailError">Please enter a valid email address</div>
                </div>
                
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" class="form-control" id="password" placeholder="Enter your password" required>
                    <div class="error-message" id="passwordError">Password is required</div>
                </div>
                
                <div class="login-options">
                    <div class="remember-me">
                        <input type="checkbox" id="rememberMe">
                        <label for="rememberMe">Remember me</label>
                    </div>
                    <a href="#" class="forgot-password">Forgot password?</a>
                </div>
                
                <button type="submit" class="btn btn-primary">Sign In</button>
                
                <div class="auth-toggle">
                    Don't have an account? <a href="#" id="showSignup">Sign Up</a>
                </div>
            </form>
            
            <!-- Signup Form -->
            <form class="auth-form signup-form" id="signupForm">
                <h2>Create Account</h2>
                <p>Join our HR management system</p>
                
                <div class="user-type">
                    <div class="user-type-option active" data-type="employee">Employee</div>
                    <div class="user-type-option" data-type="hr">HR Admin</div>
                </div>
                
                <div class="form-group">
                    <label for="signupFullName">Full Name</label>
                    <input type="text" class="form-control" id="signupFullName" placeholder="Enter your full name" required>
                    <div class="error-message" id="fullNameError">Please enter your full name</div>
                </div>
                
                <div class="form-group">
                    <label for="signupEmail">Email Address</label>
                    <input type="email" class="form-control" id="signupEmail" placeholder="Enter your email" required>
                    <div class="error-message" id="signupEmailError">Please enter a valid email address</div>
                </div>
                
                <div class="form-group">
                    <label for="signupPassword">Password</label>
                    <input type="password" class="form-control" id="signupPassword" placeholder="Create a password" required>
                    <div class="password-strength">
                        <div class="password-strength-bar" id="passwordStrengthBar"></div>
                    </div>
                    <div class="password-requirements">
                        <div class="requirement" id="lengthReq">
                            <i class="far fa-circle"></i> At least 8 characters
                        </div>
                        <div class="requirement" id="uppercaseReq">
                            <i class="far fa-circle"></i> One uppercase letter
                        </div>
                        <div class="requirement" id="numberReq">
                            <i class="far fa-circle"></i> One number
                        </div>
                    </div>
                    <div class="error-message" id="signupPasswordError">Password does not meet requirements</div>
                </div>
                
                <div class="form-group">
                    <label for="confirmPassword">Confirm Password</label>
                    <input type="password" class="form-control" id="confirmPassword" placeholder="Confirm your password" required>
                    <div class="error-message" id="confirmPasswordError">Passwords do not match</div>
                </div>
                
                <div class="department-position-group">
                    <div class="form-group">
                        <label for="signupDepartment">Department</label>
                        <select class="form-control" id="signupDepartment" required>
                            <option value="">Select Department</option>
                            <option value="Finance">Finance</option>
                            <option value="HR">HR</option>
                            <option value="IT">IT</option>
                            <option value="Marketing">Marketing</option>
                            <option value="Operations">Operations</option>
                        </select>
                        <div class="error-message" id="departmentError">Please select a department</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="signupPosition">Position</label>
                        <input type="text" class="form-control" id="signupPosition" placeholder="Your position" required>
                        <div class="error-message" id="positionError">Please enter your position</div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="signupPhone">Phone Number</label>
                    <input type="tel" class="form-control" id="signupPhone" placeholder="+264 81 234 5678" required>
                    <div class="error-message" id="phoneError">Please enter a valid phone number</div>
                </div>
                
                <button type="submit" class="btn btn-primary">Create Account</button>
                
                <div class="auth-toggle">
                    Already have an account? <a href="#" id="showLogin">Sign In</a>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Dashboard Container (hidden until login) -->
    <div class="dashboard-container" id="dashboardContainer">
        <div class="container">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="logo">
                    <h1>NamHR</h1>
                    <p>Namibian HR Solutions</p>
                </div>
                <div class="nav-links">
                    <div class="nav-item active" data-page="dashboard">
                        <i class="fas fa-home"></i>
                        <span>Dashboard</span>
                    </div>
                    <div class="nav-item" data-page="employees">
                        <i class="fas fa-user-friends"></i>
                        <span>Employee Directory</span>
                    </div>
                    <div class="nav-item" data-page="leave">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Leave Management</span>
                    </div>
                    <div class="nav-item" data-page="payroll">
                        <i class="fas fa-file-invoice-dollar"></i>
                        <span>Payroll</span>
                    </div>
                    <div class="nav-item" data-page="performance">
                        <i class="fas fa-chart-line"></i>
                        <span>Performance</span>
                    </div>
                    <div class="nav-item hr-only" data-page="recruitment">
                        <i class="fas fa-briefcase"></i>
                        <span>Recruitment</span>
                    </div>
                    <div class="nav-item hr-only" data-page="settings">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </div>
                </div>
                <div class="user-profile">
                    <div class="avatar" id="userAvatar">NS</div>
                    <div class="user-info">
                        <div class="name" id="userName">Ndapanda Shaanika</div>
                        <div class="role" id="userRole">Finance Department</div>
                    </div>
                    <button class="logout-btn" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
            
            <!-- Dashboard Content -->
            <div class="main-content active" id="dashboard">
                <div class="header">
                    <div class="page-title">
                        <h2>Dashboard</h2>
                        <p>Welcome back! Here's what's happening today.</p>
                    </div>
                    <div class="header-actions">
                        <div class="search-bar">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="Search...">
                        </div>
                        <div class="notification-btn" id="notificationBtn">
                            <i class="fas fa-bell"></i>
                            <div class="notification-dropdown" id="notificationDropdown">
                                <div class="notification-header">
                                    <div class="notification-title">Notifications</div>
                                    <span class="view-all">Mark all as read</span>
                                </div>
                                <div class="notification-list">
                                    <div class="notification-item">
                                        <div class="notification-content">
                                            <h4>Account Created Successfully</h4>
                                            <p>Your account has been created and is ready to use</p>
                                            <div class="notification-time">Just now</div>
                                        </div>
                                    </div>
                                    <div class="notification-item">
                                        <h4>Welcome to NamHR</h4>
                                        <p>Explore our comprehensive HR management features</p>
                                        <div class="notification-time">Just now</div>
                                    </div>
                                    <div class="notification-item">
                                        <h4>Complete Your Profile</h4>
                                        <p>Please update your profile information</p>
                                        <div class="notification-time">Just now</div>
                                    </div>
                                </div>
                                <div class="notification-footer">View all notifications</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="welcome-banner">
                    <div class="welcome-text">
                        <h3 id="greeting">Good morning, Ndapanda!</h3>
                        <p>You have <span id="pendingRequests">2</span> pending leave requests and <span id="newAnnouncements">1</span> new announcement.</p>
                    </div>
                    <div>
                        <i class="fas fa-calendar-check fa-2x"></i>
                    </div>
                </div>
                <div class="quick-stats">
                    <div class="stat-card">
                        <div class="stat-icon stat-1">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h4 id="totalEmployees">142</h4>
                            <p>Total Employees</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-2">
                            <i class="fas fa-user-clock"></i>
                        </div>
                        <div class="stat-info">
                            <h4 id="turnoverRate">5.8%</h4>
                            <p>Turnover Rate</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-3">
                            <i class="fas fa-briefcase"></i>
                        </div>
                        <div class="stat-info">
                            <h4 id="openPositions">7</h4>
                            <p>Open Positions</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-4">
                            <i class="fas fa-calendar-day"></i>
                        </div>
                        <div class="stat-info">
                            <h4 id="avgTimeToHire">32</h4>
                            <p>Avg. Time to Hire</p>
                        </div>
                    </div>
                </div>
                <div class="dashboard-grid">
                    <div class="left-column">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Quick Actions</h3>
                                <span class="view-all">See all</span>
                            </div>
                            <div class="quick-links">
                                <div class="link-card" onclick="openModal('leaveModal')">
                                    <div class="link-icon">
                                        <i class="fas fa-calendar-plus"></i>
                                    </div>
                                    <h4>Request Leave</h4>
                                    <p>Submit a new leave request</p>
                                </div>
                                <div class="link-card" onclick="openModal('payslipModal')">
                                    <div class="link-icon">
                                        <i class="fas fa-file-invoice"></i>
                                    </div>
                                    <h4>View Payslips</h4>
                                    <p>Access your payment history</p>
                                </div>
                                <div class="link-card" onclick="openModal('profileModal')">
                                    <div class="link-icon">
                                        <i class="fas fa-user-edit"></i>
                                    </div>
                                    <h4>Update Profile</h4>
                                    <p>Edit your personal information</p>
                                </div>
                                <div class="link-card" onclick="openModal('policyModal')">
                                    <div class="link-icon">
                                        <i class="fas fa-file-alt"></i>
                                    </div>
                                    <h4>HR Policies</h4>
                                    <p>Company policies and guidelines</p>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Recent Activities</h3>
                                <span class="view-all">View all</span>
                            </div>
                            <div class="activity-list" id="activityList">
                                <div class="activity-item">
                                    <div class="activity-icon">
                                        <i class="fas fa-user-plus"></i>
                                    </div>
                                    <div class="activity-content">
                                        <h4>Account Created</h4>
                                        <p>Your account has been successfully created</p>
                                    </div>
                                    <div class="activity-time">Just now</div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-icon">
                                        <i class="fas fa-sign-in-alt"></i>
                                    </div>
                                    <div class="activity-content">
                                        <h4>Logged In</h4>
                                        <p>Welcome to NamHR System</p>
                                    </div>
                                    <div class="activity-time">Just now</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="right-column">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Leave Balance</h3>
                                <span class="view-all">Details</span>
                            </div>
                            <div class="leave-balance">
                                <div class="balance-item">
                                    <div class="balance-info">
                                        <div class="balance-icon">
                                            <i class="fas fa-umbrella-beach"></i>
                                        </div>
                                        <div class="balance-details">
                                            <h4>Annual Leave</h4>
                                            <p>21 days per year</p>
                                        </div>
                                    </div>
                                    <div class="balance-days" id="annualLeave">21 days left</div>
                                </div>
                                <div class="balance-item">
                                    <div class="balance-info">
                                        <div class="balance-icon">
                                            <i class="fas fa-stethoscope"></i>
                                        </div>
                                        <div class="balance-details">
                                            <h4>Sick Leave</h4>
                                            <p>30 days per year</p>
                                        </div>
                                    </div>
                                    <div class="balance-days" id="sickLeave">30 days left</div>
                                </div>
                                <div class="balance-item">
                                    <div class="balance-info">
                                        <div class="balance-icon">
                                            <i class="fas fa-heart"></i>
                                        </div>
                                        <div class="balance-details">
                                            <h4>Personal Leave</h4>
                                            <p>5 days per year</p>
                                        </div>
                                    </div>
                                    <div class="balance-days" id="personalLeave">5 days left</div>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Getting Started</h3>
                                <span class="view-all">View all</span>
                            </div>
                            <div class="upcoming-list">
                                <div class="upcoming-item">
                                    <div class="upcoming-date">
                                        <div class="day"><i class="fas fa-user-edit"></i></div>
                                    </div>
                                    <div class="upcoming-details">
                                        <h4>Complete Your Profile</h4>
                                        <p>Add your personal information</p>
                                        <span class="status-badge status-pending">To Do</span>
                                    </div>
                                </div>
                                <div class="upcoming-item">
                                    <div class="upcoming-date">
                                        <div class="day"><i class="fas fa-file-alt"></i></div>
                                    </div>
                                    <div class="upcoming-details">
                                        <h4>Review HR Policies</h4>
                                        <p>Familiarize yourself with company policies</p>
                                        <span class="status-badge status-pending">To Do</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Employee Directory Content -->
            <div class="main-content" id="employees">
                <div class="header">
                    <div class="page-title">
                        <h2>Employee Directory</h2>
                        <p>Manage and view all employee information</p>
                    </div>
                    <div class="header-actions">
                        <div class="search-bar">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="Search employees..." id="employeeSearch">
                        </div>
                        <button class="btn btn-primary hr-only" onclick="openModal('addEmployeeModal')">
                            <i class="fas fa-plus"></i> Add Employee
                        </button>
                    </div>
                </div>
                <div class="employee-grid" id="employeeGrid">
                    <!-- Employee cards will be dynamically generated here -->
                </div>
            </div>
            
            <!-- Leave Management Content -->
            <div class="main-content" id="leave">
                <div class="header">
                    <div class="page-title">
                        <h2>Leave Management</h2>
                        <p>Manage employee leave requests and balances</p>
                    </div>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="openModal('leaveModal')">
                            <i class="fas fa-plus"></i> Request Leave
                        </button>
                    </div>
                </div>
                <div class="leave-tabs">
                    <div class="leave-tab active" data-tab="my-requests">My Requests</div>
                    <div class="leave-tab hr-only" data-tab="team-requests">Team Requests</div>
                    <div class="leave-tab" data-tab="calendar">Calendar View</div>
                </div>
                <div class="leave-tab-content active" id="my-requests">
                    <div class="leave-requests-list" id="myLeaveRequests">
                        <!-- Leave requests will be dynamically generated here -->
                    </div>
                </div>
                <div class="leave-tab-content" id="team-requests">
                    <div class="leave-requests-list" id="teamLeaveRequests">
                        <!-- Team leave requests will be dynamically generated here -->
                    </div>
                </div>
                <div class="leave-tab-content" id="calendar">
                    <div class="calendar-container">
                        <p>Calendar view will be implemented here</p>
                    </div>
                </div>
            </div>
            
            <!-- Payroll Content -->
            <div class="main-content" id="payroll">
                <div class="header">
                    <div class="page-title">
                        <h2>Payroll</h2>
                        <p>Manage employee payroll and payslips</p>
                    </div>
                    <div class="header-actions">
                        <button class="btn btn-primary hr-only" onclick="openModal('payrollRunModal')">
                            <i class="fas fa-calculator"></i> Run Payroll
                        </button>
                    </div>
                </div>
                <div class="payslip-filters">
                    <select class="form-control" id="monthFilter" style="width: auto;">
                        <option>All Months</option>
                        <option>January</option>
                        <option>February</option>
                        <option>March</option>
                        <option>April</option>
                        <option>May</option>
                        <option>June</option>
                        <option>July</option>
                        <option>August</option>
                        <option>September</option>
                        <option>October</option>
                        <option>November</option>
                        <option>December</option>
                    </select>
                    <select class="form-control" id="yearFilter" style="width: auto;">
                        <option>2023</option>
                        <option>2022</option>
                        <option>2021</option>
                    </select>
                </div>
                <div class="payslip-list" id="payslipList">
                    <!-- Payslips will be dynamically generated here -->
                </div>
            </div>
            
            <!-- Performance Content -->
            <div class="main-content" id="performance">
                <div class="header">
                    <div class="page-title">
                        <h2>Performance Management</h2>
                        <p>Track and manage employee performance</p>
                    </div>
                    <div class="header-actions">
                        <button class="btn btn-primary hr-only" onclick="openModal('reviewModal')">
                            <i class="fas fa-star"></i> New Review
                        </button>
                    </div>
                </div>
                <div class="performance-overview">
                    <div class="performance-metric">
                        <div class="metric-value">4.2</div>
                        <div class="metric-label">Avg. Rating</div>
                    </div>
                    <div class="performance-metric">
                        <div class="metric-value">87%</div>
                        <div class="metric-label">Goal Completion</div>
                    </div>
                    <div class="performance-metric">
                        <div class="metric-value">12</div>
                        <div class="metric-label">Reviews Completed</div>
                    </div>
                    <div class="performance-metric">
                        <div class="metric-value">3</div>
                        <div class="metric-label">Pending Reviews</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Recent Reviews</h3>
                        <span class="view-all">View all</span>
                    </div>
                    <div class="review-list" id="reviewList">
                        <!-- Reviews will be dynamically generated here -->
                    </div>
                </div>
            </div>
            
            <!-- Recruitment Content -->
            <div class="main-content" id="recruitment">
                <div class="header">
                    <div class="page-title">
                        <h2>Recruitment</h2>
                        <p>Manage job postings and applications</p>
                    </div>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="openModal('jobPostingModal')">
                            <i class="fas fa-plus"></i> New Job Posting
                        </button>
                    </div>
                </div>
                <div class="job-filters">
                    <select class="form-control" id="statusFilter" style="width: auto;">
                        <option>All Statuses</option>
                        <option>Open</option>
                        <option>Closed</option>
                        <option>On Hold</option>
                    </select>
                    <select class="form-control" id="departmentFilter" style="width: auto;">
                        <option>All Departments</option>
                        <option>Finance</option>
                        <option>HR</option>
                        <option>IT</option>
                        <option>Marketing</option>
                        <option>Operations</option>
                    </select>
                </div>
                <div class="job-list" id="jobList">
                    <!-- Job postings will be dynamically generated here -->
                </div>
            </div>
            
            <!-- Settings Content -->
            <div class="main-content" id="settings">
                <div class="header">
                    <div class="page-title">
                        <h2>Settings</h2>
                        <p>Configure system settings and preferences</p>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Account Settings</h3>
                    <div class="settings-item">
                        <div class="settings-info">
                            <h4>Email Notifications</h4>
                            <p>Receive email notifications for important updates</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="settings-item">
                        <div class="settings-info">
                            <h4>Two-Factor Authentication</h4>
                            <p>Add an extra layer of security to your account</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="settings-item">
                        <div class="settings-info">
                            <h4>Language</h4>
                            <p>Set your preferred language</p>
                        </div>
                        <select class="form-control" style="width: auto;">
                            <option>English</option>
                            <option>German</option>
                            <option>Afrikaans</option>
                        </select>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>System Preferences</h3>
                    <div class="settings-item">
                        <div class="settings-info">
                            <h4>Dark Mode</h4>
                            <p>Enable dark mode for better viewing in low light</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="settings-item">
                        <div class="settings-info">
                            <h4>Compact View</h4>
                            <p>Show more information in less space</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Database Management</h3>
                    <div class="settings-item">
                        <div class="settings-info">
                            <h4>View Database Statistics</h4>
                            <p>See current database status and information</p>
                        </div>
                        <button class="btn btn-secondary" onclick="toggleDbInfo()">View Stats</button>
                    </div>
                    <div class="settings-item">
                        <div class="settings-info">
                            <h4>Export Database</h4>
                            <p>Download a copy of the current database</p>
                        </div>
                        <button class="btn btn-secondary" onclick="exportDbData()">Export</button>
                    </div>
                    <div class="settings-item">
                        <div class="settings-info">
                            <h4>Clear Database</h4>
                            <p>Remove all data from the database</p>
                        </div>
                        <button class="btn btn-secondary" style="background: #fee2e2; color: #dc2626;" onclick="clearDbData()">Clear</button>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Privacy & Security</h3>
                    <div class="settings-item">
                        <div class="settings-info">
                            <h4>Change Password</h4>
                            <p>Update your account password</p>
                        </div>
                        <button class="btn btn-secondary">Change</button>
                    </div>
                    <div class="settings-item">
                        <div class="settings-info">
                            <h4>Delete Account</h4>
                            <p>Permanently delete your account</p>
                        </div>
                        <button class="btn btn-secondary" style="background: #fee2e2; color: #dc2626;">Delete</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Leave Request Modal -->
    <div class="modal" id="leaveModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Request Leave</h3>
                <button class="close-modal" onclick="closeModal('leaveModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="leaveType">Leave Type</label>
                    <select class="form-control" id="leaveType">
                        <option>Annual Leave</option>
                        <option>Sick Leave</option>
                        <option>Personal Leave</option>
                        <option>Maternity Leave</option>
                        <option>Paternity Leave</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="startDate">Start Date</label>
                    <input type="date" class="form-control" id="startDate">
                </div>
                <div class="form-group">
                    <label for="endDate">End Date</label>
                    <input type="date" class="form-control" id="endDate">
                </div>
                <div class="form-group">
                    <label for="leaveReason">Reason</label>
                    <textarea class="form-control" id="leaveReason" rows="3" placeholder="Brief reason for your leave"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('leaveModal')">Cancel</button>
                <button class="btn btn-primary" onclick="submitLeaveRequest()">Submit Request</button>
            </div>
        </div>
    </div>
    
    <!-- Payslip Modal -->
    <div class="modal" id="payslipModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Payslip History</h3>
                <button class="close-modal" onclick="closeModal('payslipModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="payslipMonth">Select Month</label>
                    <select class="form-control" id="payslipMonth">
                        <option>August 2023</option>
                        <option>July 2023</option>
                        <option>June 2023</option>
                        <option>May 2023</option>
                        <option>April 2023</option>
                    </select>
                </div>
                <div class="payslip-preview">
                    <h4>Payslip Preview</h4>
                    <div style="background: #f8fafc; padding: 15px; border-radius: 8px; margin-top: 10px;">
                        <p><strong>Employee:</strong> <span id="payslipEmployeeName">Ndapanda Shaanika</span></p>
                        <p><strong>Employee ID:</strong> <span id="payslipEmployeeId">2001</span></p>
                        <p><strong>Department:</strong> <span id="payslipDepartment">Finance</span></p>
                        <p><strong>Period:</strong> <span id="payslipPeriod">August 1-31, 2023</span></p>
                        <p><strong>Net Salary:</strong> <span id="payslipAmount">N$ 25,450.00</span></p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('payslipModal')">Close</button>
                <button class="btn btn-primary" onclick="downloadPayslip()">Download Payslip</button>
            </div>
        </div>
    </div>
    
    <!-- Profile Modal -->
    <div class="modal" id="profileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Update Profile</h3>
                <button class="close-modal" onclick="closeModal('profileModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="fullName">Full Name</label>
                    <input type="text" class="form-control" id="fullName" value="Ndapanda Shaanika">
                </div>
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" class="form-control" id="email" value="ndapanda.shaanika@company.na">
                </div>
                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" class="form-control" id="phone" value="+264 81 234 5678">
                </div>
                <div class="form-group">
                    <label for="address">Address</label>
                    <textarea class="form-control" id="address" rows="2">123 Independence Ave, Windhoek</textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('profileModal')">Cancel</button>
                <button class="btn btn-primary" onclick="updateProfile()">Save Changes</button>
            </div>
        </div>
    </div>
    
    <!-- Policy Modal -->
    <div class="modal" id="policyModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">HR Policies</h3>
                <button class="close-modal" onclick="closeModal('policyModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="policyCategory">Policy Category</label>
                    <select class="form-control" id="policyCategory">
                        <option>Leave Policy</option>
                        <option>Code of Conduct</option>
                        <option>Remote Work Policy</option>
                        <option>Expense Reimbursement</option>
                        <option>Performance Management</option>
                    </select>
                </div>
                <div class="policy-content">
                    <h4>Leave Policy</h4>
                    <div style="background: #f8fafc; padding: 15px; border-radius: 8px; margin-top: 10px; max-height: 200px; overflow-y: auto;">
                        <p><strong>Annual Leave</strong></p>
                        <p>All full-time employees are entitled to 21 working days of annual leave per year. Leave should be requested at least 2 weeks in advance for approval.</p>
                        
                        <p><strong>Sick Leave</strong></p>
                        <p>Employees are entitled to 30 days of sick leave per year. A doctor's certificate is required for absences exceeding 3 consecutive days.</p>
                        
                        <p><strong>Personal Leave</strong></p>
                        <p>Employees may take up to 5 days of personal leave per year for emergencies or personal matters.</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('policyModal')">Close</button>
                <button class="btn btn-primary" onclick="downloadPolicy()">Download Policy</button>
            </div>
        </div>
    </div>
    
    <!-- Add Employee Modal -->
    <div class="modal" id="addEmployeeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add New Employee</h3>
                <button class="close-modal" onclick="closeModal('addEmployeeModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="newEmployeeName">Full Name</label>
                    <input type="text" class="form-control" id="newEmployeeName" placeholder="Enter full name">
                </div>
                <div class="form-group">
                    <label for="newEmployeeEmail">Email Address</label>
                    <input type="email" class="form-control" id="newEmployeeEmail" placeholder="Enter email address">
                </div>
                <div class="form-group">
                    <label for="newEmployeePosition">Position</label>
                    <input type="text" class="form-control" id="newEmployeePosition" placeholder="Enter position">
                </div>
                <div class="form-group">
                    <label for="newEmployeeDepartment">Department</label>
                    <select class="form-control" id="newEmployeeDepartment">
                        <option>Finance</option>
                        <option>HR</option>
                        <option>IT</option>
                        <option>Marketing</option>
                        <option>Operations</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="newEmployeePhone">Phone Number</label>
                    <input type="tel" class="form-control" id="newEmployeePhone" placeholder="Enter phone number">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addEmployeeModal')">Cancel</button>
                <button class="btn btn-primary" onclick="addEmployee()">Add Employee</button>
            </div>
        </div>
    </div>
    
    <!-- Payroll Run Modal -->
    <div class="modal" id="payrollRunModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Run Payroll</h3>
                <button class="close-modal" onclick="closeModal('payrollRunModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="payrollMonth">Month</label>
                    <select class="form-control" id="payrollMonth">
                        <option>September 2023</option>
                        <option>October 2023</option>
                        <option>November 2023</option>
                        <option>December 2023</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="payrollType">Payroll Type</label>
                    <select class="form-control" id="payrollType">
                        <option>Full Payroll</option>
                        <option>Supplementary</option>
                        <option>Final</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="payrollNotes">Notes</label>
                    <textarea class="form-control" id="payrollNotes" rows="3" placeholder="Any additional notes for this payroll run"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('payrollRunModal')">Cancel</button>
                <button class="btn btn-primary" onclick="runPayroll()">Run Payroll</button>
            </div>
        </div>
    </div>
    
    <!-- Performance Review Modal -->
    <div class="modal" id="reviewModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">New Performance Review</h3>
                <button class="close-modal" onclick="closeModal('reviewModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="reviewEmployee">Employee</label>
                    <select class="form-control" id="reviewEmployee">
                        <option>Select an employee</option>
                        <option>John Smith</option>
                        <option>Jane Doe</option>
                        <option>Michael Johnson</option>
                        <option>Sarah Williams</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="reviewType">Review Type</label>
                    <select class="form-control" id="reviewType">
                        <option>Quarterly Review</option>
                        <option>Annual Review</option>
                        <option>Probation Review</option>
                        <option>Project Review</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="reviewRating">Overall Rating</label>
                    <select class="form-control" id="reviewRating">
                        <option>5 - Outstanding</option>
                        <option>4 - Exceeds Expectations</option>
                        <option>3 - Meets Expectations</option>
                        <option>2 - Needs Improvement</option>
                        <option>1 - Unsatisfactory</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="reviewComments">Comments</label>
                    <textarea class="form-control" id="reviewComments" rows="4" placeholder="Enter your review comments"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('reviewModal')">Cancel</button>
                <button class="btn btn-primary" onclick="submitReview()">Submit Review</button>
            </div>
        </div>
    </div>
    
    <!-- Job Posting Modal -->
    <div class="modal" id="jobPostingModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">New Job Posting</h3>
                <button class="close-modal" onclick="closeModal('jobPostingModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="jobTitle">Job Title</label>
                    <input type="text" class="form-control" id="jobTitle" placeholder="Enter job title">
                </div>
                <div class="form-group">
                    <label for="jobDepartment">Department</label>
                    <select class="form-control" id="jobDepartment">
                        <option>Finance</option>
                        <option>HR</option>
                        <option>IT</option>
                        <option>Marketing</option>
                        <option>Operations</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="jobLocation">Location</label>
                    <input type="text" class="form-control" id="jobLocation" placeholder="Enter job location">
                </div>
                <div class="form-group">
                    <label for="jobType">Job Type</label>
                    <select class="form-control" id="jobType">
                        <option>Full-time</option>
                        <option>Part-time</option>
                        <option>Contract</option>
                        <option>Internship</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="jobDescription">Job Description</label>
                    <textarea class="form-control" id="jobDescription" rows="4" placeholder="Enter job description"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('jobPostingModal')">Cancel</button>
                <button class="btn btn-primary" onclick="postJob()">Post Job</button>
            </div>
        </div>
    </div>
    
    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <div class="toast-icon">
            <i class="fas fa-check-circle"></i>
        </div>
        <div class="toast-message" id="toastMessage">Operation completed successfully!</div>
    </div>
    
    <script>
        // In-memory database using JavaScript objects (hashmaps)
        const database = {
            users: new Map(),
            employees: new Map(),
            leaveRequests: new Map(),
            payslips: new Map(),
            reviews: new Map(),
            jobPostings: new Map(),
            activities: new Map(),
            
            // Initialize with some default data
            init() {
                // Add default users
                this.users.set('employee@company.na', {
                    id: 1,
                    email: 'employee@company.na',
                    password: 'employee123',
                    name: 'Ndapanda Shaanika',
                    department: 'Finance Department',
                    phone: '+264 81 234 5678',
                    address: '123 Independence Ave, Windhoek',
                    userType: 'employee',
                    createdAt: new Date('2023-01-15')
                });
                
                this.users.set('hr@company.na', {
                    id: 2,
                    email: 'hr@company.na',
                    password: 'hradmin123',
                    name: 'HR Administrator',
                    department: 'HR Department',
                    phone: '+264 81 345 6789',
                    address: '456 Independence Ave, Windhoek',
                    userType: 'hr',
                    createdAt: new Date('2023-01-10')
                });
                
                // Add default employees
                this.employees.set(1, {
                    id: 1,
                    name: 'John Smith',
                    position: 'Finance Manager',
                    department: 'Finance',
                    email: 'john.smith@company.na',
                    phone: '+264 81 123 4567',
                    hireDate: new Date('2020-05-15')
                });
                
                this.employees.set(2, {
                    id: 2,
                    name: 'Jane Doe',
                    position: 'HR Specialist',
                    department: 'HR',
                    email: 'jane.doe@company.na',
                    phone: '+264 81 234 5678',
                    hireDate: new Date('2019-08-20')
                });
                
                this.employees.set(3, {
                    id: 3,
                    name: 'Michael Johnson',
                    position: 'IT Director',
                    department: 'IT',
                    email: 'michael.johnson@company.na',
                    phone: '+264 81 345 6789',
                    hireDate: new Date('2018-03-10')
                });
                
                this.employees.set(4, {
                    id: 4,
                    name: 'Sarah Williams',
                    position: 'Marketing Manager',
                    department: 'Marketing',
                    email: 'sarah.williams@company.na',
                    phone: '+264 81 456 7890',
                    hireDate: new Date('2021-02-28')
                });
                
                this.employees.set(5, {
                    id: 5,
                    name: 'David Brown',
                    position: 'Operations Manager',
                    department: 'Operations',
                    email: 'david.brown@company.na',
                    phone: '+264 81 567 8901',
                    hireDate: new Date('2019-11-15')
                });
                
                this.employees.set(6, {
                    id: 6,
                    name: 'Emily Davis',
                    position: 'Accountant',
                    department: 'Finance',
                    email: 'emily.davis@company.na',
                    phone: '+264 81 678 9012',
                    hireDate: new Date('2022-04-10')
                });
                
                // Add default leave requests
                this.leaveRequests.set(1, {
                    id: 1,
                    userId: 1,
                    type: 'Annual Leave',
                    startDate: '2023-09-15',
                    endDate: '2023-09-20',
                    status: 'Approved',
                    days: 5,
                    reason: 'Family vacation',
                    createdAt: new Date('2023-08-20')
                });
                
                this.leaveRequests.set(2, {
                    id: 2,
                    userId: 1,
                    type: 'Sick Leave',
                    startDate: '2023-08-10',
                    endDate: '2023-08-12',
                    status: 'Approved',
                    days: 2,
                    reason: 'Flu',
                    createdAt: new Date('2023-08-09')
                });
                
                this.leaveRequests.set(3, {
                    id: 3,
                    userId: 1,
                    type: 'Personal Leave',
                    startDate: '2023-10-05',
                    endDate: '2023-10-05',
                    status: 'Pending',
                    days: 1,
                    reason: 'Personal appointment',
                    createdAt: new Date('2023-10-01')
                });
                
                // Add default payslips
                this.payslips.set(1, {
                    id: 1,
                    userId: 1,
                    month: 'August 2023',
                    amount: 'N$ 25,450.00',
                    date: '2023-08-31',
                    status: 'Paid',
                    createdAt: new Date('2023-08-31')
                });
                
                this.payslips.set(2, {
                    id: 2,
                    userId: 1,
                    month: 'July 2023',
                    amount: 'N$ 25,450.00',
                    date: '2023-07-31',
                    status: 'Paid',
                    createdAt: new Date('2023-07-31')
                });
                
                // Add default reviews
                this.reviews.set(1, {
                    id: 1,
                    employeeId: 1,
                    reviewerId: 2,
                    date: '2023-08-15',
                    rating: 4,
                    comments: 'Excellent performance this quarter. Met all targets.',
                    createdAt: new Date('2023-08-15')
                });
                
                // Add default job postings
                this.jobPostings.set(1, {
                    id: 1,
                    title: 'Senior Accountant',
                    department: 'Finance',
                    location: 'Windhoek',
                    type: 'Full-time',
                    posted: '2023-08-20',
                    status: 'Open',
                    description: 'We are looking for a qualified Senior Accountant to join our Finance department.',
                    createdAt: new Date('2023-08-20')
                });
                
                // Update database stats
                this.updateStats();
            },
            
            // User management
            addUser(userData) {
                const userId = this.users.size + 1;
                const user = {
                    id: userId,
                    ...userData,
                    createdAt: new Date()
                };
                this.users.set(userData.email, user);
                this.updateStats();
                return user;
            },
            
            getUser(email) {
                return this.users.get(email);
            },
            
            updateUser(email, userData) {
                const user = this.users.get(email);
                if (user) {
                    this.users.set(email, { ...user, ...userData });
                    this.updateStats();
                    return true;
                }
                return false;
            },
            
            deleteUser(email) {
                const deleted = this.users.delete(email);
                if (deleted) {
                    this.updateStats();
                }
                return deleted;
            },
            
            getAllUsers() {
                return Array.from(this.users.values());
            },
            
            // Employee management
            addEmployee(employeeData) {
                const employeeId = this.employees.size + 1;
                const employee = {
                    id: employeeId,
                    ...employeeData,
                    createdAt: new Date()
                };
                this.employees.set(employeeId, employee);
                this.updateStats();
                return employee;
            },
            
            getEmployee(id) {
                return this.employees.get(id);
            },
            
            updateEmployee(id, employeeData) {
                const employee = this.employees.get(id);
                if (employee) {
                    this.employees.set(id, { ...employee, ...employeeData });
                    this.updateStats();
                    return true;
                }
                return false;
            },
            
            deleteEmployee(id) {
                const deleted = this.employees.delete(id);
                if (deleted) {
                    this.updateStats();
                }
                return deleted;
            },
            
            getAllEmployees() {
                return Array.from(this.employees.values());
            },
            
            // Leave request management
            addLeaveRequest(leaveData) {
                const leaveId = this.leaveRequests.size + 1;
                const leaveRequest = {
                    id: leaveId,
                    ...leaveData,
                    createdAt: new Date()
                };
                this.leaveRequests.set(leaveId, leaveRequest);
                this.updateStats();
                return leaveRequest;
            },
            
            getLeaveRequest(id) {
                return this.leaveRequests.get(id);
            },
            
            updateLeaveRequest(id, leaveData) {
                const leaveRequest = this.leaveRequests.get(id);
                if (leaveRequest) {
                    this.leaveRequests.set(id, { ...leaveRequest, ...leaveData });
                    this.updateStats();
                    return true;
                }
                return false;
            },
            
            deleteLeaveRequest(id) {
                const deleted = this.leaveRequests.delete(id);
                if (deleted) {
                    this.updateStats();
                }
                return deleted;
            },
            
            getAllLeaveRequests() {
                return Array.from(this.leaveRequests.values());
            },
            
            getLeaveRequestsByUserId(userId) {
                return Array.from(this.leaveRequests.values()).filter(lr => lr.userId === userId);
            },
            
            // Payslip management
            addPayslip(payslipData) {
                const payslipId = this.payslips.size + 1;
                const payslip = {
                    id: payslipId,
                    ...payslipData,
                    createdAt: new Date()
                };
                this.payslips.set(payslipId, payslip);
                this.updateStats();
                return payslip;
            },
            
            getPayslip(id) {
                return this.payslips.get(id);
            },
            
            updatePayslip(id, payslipData) {
                const payslip = this.payslips.get(id);
                if (payslip) {
                    this.payslips.set(id, { ...payslip, ...payslipData });
                    this.updateStats();
                    return true;
                }
                return false;
            },
            
            deletePayslip(id) {
                const deleted = this.payslips.delete(id);
                if (deleted) {
                    this.updateStats();
                }
                return deleted;
            },
            
            getAllPayslips() {
                return Array.from(this.payslips.values());
            },
            
            getPayslipsByUserId(userId) {
                return Array.from(this.payslips.values()).filter(p => p.userId === userId);
            },
            
            // Review management
            addReview(reviewData) {
                const reviewId = this.reviews.size + 1;
                const review = {
                    id: reviewId,
                    ...reviewData,
                    createdAt: new Date()
                };
                this.reviews.set(reviewId, review);
                this.updateStats();
                return review;
            },
            
            getReview(id) {
                return this.reviews.get(id);
            },
            
            updateReview(id, reviewData) {
                const review = this.reviews.get(id);
                if (review) {
                    this.reviews.set(id, { ...review, ...reviewData });
                    this.updateStats();
                    return true;
                }
                return false;
            },
            
            deleteReview(id) {
                const deleted = this.reviews.delete(id);
                if (deleted) {
                    this.updateStats();
                }
                return deleted;
            },
            
            getAllReviews() {
                return Array.from(this.reviews.values());
            },
            
            getReviewsByEmployeeId(employeeId) {
                return Array.from(this.reviews.values()).filter(r => r.employeeId === employeeId);
            },
            
            // Job posting management
            addJobPosting(jobData) {
                const jobId = this.jobPostings.size + 1;
                const jobPosting = {
                    id: jobId,
                    ...jobData,
                    createdAt: new Date()
                };
                this.jobPostings.set(jobId, jobPosting);
                this.updateStats();
                return jobPosting;
            },
            
            getJobPosting(id) {
                return this.jobPostings.get(id);
            },
            
            updateJobPosting(id, jobData) {
                const jobPosting = this.jobPostings.get(id);
                if (jobPosting) {
                    this.jobPostings.set(id, { ...jobPosting, ...jobData });
                    this.updateStats();
                    return true;
                }
                return false;
            },
            
            deleteJobPosting(id) {
                const deleted = this.jobPostings.delete(id);
                if (deleted) {
                    this.updateStats();
                }
                return deleted;
            },
            
            getAllJobPostings() {
                return Array.from(this.jobPostings.values());
            },
            
            // Activity management
            addActivity(activityData) {
                const activityId = this.activities.size + 1;
                const activity = {
                    id: activityId,
                    ...activityData,
                    createdAt: new Date()
                };
                this.activities.set(activityId, activity);
                this.updateStats();
                return activity;
            },
            
            getActivity(id) {
                return this.activities.get(id);
            },
            
            getAllActivities() {
                return Array.from(this.activities.values()).sort((a, b) => b.createdAt - a.createdAt);
            },
            
            getActivitiesByUserId(userId) {
                return Array.from(this.activities.values())
                    .filter(a => a.userId === userId)
                    .sort((a, b) => b.createdAt - a.createdAt);
            },
            
            // Database statistics
            updateStats() {
                document.getElementById('dbUserCount').textContent = this.users.size;
                document.getElementById('dbEmployeeCount').textContent = this.employees.size;
                document.getElementById('dbLeaveCount').textContent = this.leaveRequests.size;
                document.getElementById('dbPayslipCount').textContent = this.payslips.size;
                document.getElementById('dbReviewCount').textContent = this.reviews.size;
                document.getElementById('dbJobCount').textContent = this.jobPostings.size;
            },
            
            // Export database as JSON
            exportData() {
                const data = {
                    users: Array.from(this.users.entries()),
                    employees: Array.from(this.employees.entries()),
                    leaveRequests: Array.from(this.leaveRequests.entries()),
                    payslips: Array.from(this.payslips.entries()),
                    reviews: Array.from(this.reviews.entries()),
                    jobPostings: Array.from(this.jobPostings.entries()),
                    activities: Array.from(this.activities.entries()),
                    exportedAt: new Date().toISOString()
                };
                
                const dataStr = JSON.stringify(data, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                
                const exportFileDefaultName = 'namhr_database_export.json';
                
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
                
                return data;
            },
            
            // Clear all data
            clearData() {
                if (confirm('Are you sure you want to clear all data? This action cannot be undone.')) {
                    this.users.clear();
                    this.employees.clear();
                    this.leaveRequests.clear();
                    this.payslips.clear();
                    this.reviews.clear();
                    this.jobPostings.clear();
                    this.activities.clear();
                    this.updateStats();
                    showToast('Database cleared successfully', 'info');
                    return true;
                }
                return false;
            }
        };
        
        // Initialize database with default data
        database.init();
        
        // Current user state
        let currentUser = null;
        let userType = null;
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Setup login form
            setupLoginForm();
            
            // Setup signup form
            setupSignupForm();
            
            // Setup form toggles
            setupFormToggles();
            
            // Setup user type selection
            setupUserTypeSelection();
            
            // Setup password strength checker
            setupPasswordStrength();
            
            // Setup logout button
            setupLogoutButton();
            
            // Setup database info panel
            setupDatabaseInfo();
        });
        
        // Setup login form
        function setupLoginForm() {
            const loginForm = document.getElementById('loginForm');
            
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;
                const userTypeSelection = document.querySelector('.login-form .user-type-option.active').getAttribute('data-type');
                
                // Validate form
                if (!validateLoginForm(email, password)) {
                    return;
                }
                
                // Check credentials in database
                const user = database.getUser(email);
                
                if (user && user.password === password && user.userType === userTypeSelection) {
                    // Set current user
                    currentUser = user;
                    userType = user.userType;
                    
                    // Show dashboard
                    showDashboard();
                    
                    // Show success message
                    showToast(`Welcome back, ${user.name}!`, 'success');
                    
                    // Add login activity
                    database.addActivity({
                        userId: user.id,
                        title: 'Logged In',
                        description: `${user.name} logged into the system`
                    });
                } else {
                    // Show error message
                    showToast('Invalid email or password', 'error');
                }
            });
        }
        
        // Setup signup form
        function setupSignupForm() {
            const signupForm = document.getElementById('signupForm');
            
            signupForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const fullName = document.getElementById('signupFullName').value;
                const email = document.getElementById('signupEmail').value;
                const password = document.getElementById('signupPassword').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                const department = document.getElementById('signupDepartment').value;
                const position = document.getElementById('signupPosition').value;
                const phone = document.getElementById('signupPhone').value;
                const userTypeSelection = document.querySelector('.signup-form .user-type-option.active').getAttribute('data-type');
                
                // Validate form
                if (!validateSignupForm(fullName, email, password, confirmPassword, department, position, phone)) {
                    return;
                }
                
                // Check if email already exists
                if (database.getUser(email)) {
                    showToast('Email address already registered', 'error');
                    return;
                }
                
                // Create new user
                const userData = {
                    email: email,
                    password: password,
                    name: fullName,
                    department: department + ' Department',
                    phone: phone,
                    address: '',
                    userType: userTypeSelection
                };
                
                const newUser = database.addUser(userData);
                
                // If employee, also add to employees table
                if (userTypeSelection === 'employee') {
                    database.addEmployee({
                        name: fullName,
                        position: position,
                        department: department,
                        email: email,
                        phone: phone,
                        hireDate: new Date()
                    });
                }
                
                // Set current user
                currentUser = newUser;
                userType = newUser.userType;
                
                // Show dashboard
                showDashboard();
                
                // Show success message
                showToast(`Account created successfully! Welcome, ${fullName}!`, 'success');
                
                // Add account creation activity
                database.addActivity({
                    userId: newUser.id,
                    title: 'Account Created',
                    description: `${fullName} created a new account`
                });
            });
        }
        
        // Setup form toggles
        function setupFormToggles() {
            const showSignup = document.getElementById('showSignup');
            const showLogin = document.getElementById('showLogin');
            
            showSignup.addEventListener('click', function(e) {
                e.preventDefault();
                showSignupForm();
            });
            
            showLogin.addEventListener('click', function(e) {
                e.preventDefault();
                showLoginForm();
            });
        }
        
        // Show signup form
        function showSignupForm() {
            document.querySelector('.login-form').classList.remove('active');
            document.querySelector('.signup-form').classList.add('active');
            
            // Reset form
            document.getElementById('signupForm').reset();
            document.querySelectorAll('.signup-form .error-message').forEach(msg => msg.style.display = 'none');
            document.getElementById('passwordStrengthBar').className = 'password-strength-bar';
            document.querySelectorAll('.signup-form .requirement').forEach(req => req.classList.remove('met'));
            document.querySelectorAll('.signup-form .requirement i').forEach(icon => icon.className = 'far fa-circle');
        }
        
        // Show login form
        function showLoginForm() {
            document.querySelector('.signup-form').classList.remove('active');
            document.querySelector('.login-form').classList.add('active');
            
            // Reset form
            document.getElementById('loginForm').reset();
            document.querySelectorAll('.login-form .error-message').forEach(msg => msg.style.display = 'none');
        }
        
        // Setup user type selection
        function setupUserTypeSelection() {
            // Login form user type
            const loginUserTypeOptions = document.querySelectorAll('.login-form .user-type-option');
            
            loginUserTypeOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Remove active class from all options
                    loginUserTypeOptions.forEach(opt => opt.classList.remove('active'));
                    
                    // Add active class to clicked option
                    this.classList.add('active');
                });
            });
            
            // Signup form user type
            const signupUserTypeOptions = document.querySelectorAll('.signup-form .user-type-option');
            
            signupUserTypeOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Remove active class from all options
                    signupUserTypeOptions.forEach(opt => opt.classList.remove('active'));
                    
                    // Add active class to clicked option
                    this.classList.add('active');
                    
                    // Show/hide department and position based on user type
                    const departmentPositionGroup = document.querySelector('.department-position-group');
                    if (this.getAttribute('data-type') === 'hr') {
                        departmentPositionGroup.style.display = 'none';
                    } else {
                        departmentPositionGroup.style.display = 'grid';
                    }
                });
            });
        }
        
        // Setup password strength checker
        function setupPasswordStrength() {
            const passwordInput = document.getElementById('signupPassword');
            const strengthBar = document.getElementById('passwordStrengthBar');
            const lengthReq = document.getElementById('lengthReq');
            const uppercaseReq = document.getElementById('uppercaseReq');
            const numberReq = document.getElementById('numberReq');
            
            passwordInput.addEventListener('input', function() {
                const password = this.value;
                let strength = 0;
                
                // Check length
                if (password.length >= 8) {
                    strength++;
                    lengthReq.classList.add('met');
                    lengthReq.querySelector('i').className = 'fas fa-check-circle';
                } else {
                    lengthReq.classList.remove('met');
                    lengthReq.querySelector('i').className = 'far fa-circle';
                }
                
                // Check uppercase
                if (/[A-Z]/.test(password)) {
                    strength++;
                    uppercaseReq.classList.add('met');
                    uppercaseReq.querySelector('i').className = 'fas fa-check-circle';
                } else {
                    uppercaseReq.classList.remove('met');
                    uppercaseReq.querySelector('i').className = 'far fa-circle';
                }
                
                // Check number
                if (/[0-9]/.test(password)) {
                    strength++;
                    numberReq.classList.add('met');
                    numberReq.querySelector('i').className = 'fas fa-check-circle';
                } else {
                    numberReq.classList.remove('met');
                    numberReq.querySelector('i').className = 'far fa-circle';
                }
                
                // Update strength bar
                strengthBar.className = 'password-strength-bar';
                if (strength === 1) {
                    strengthBar.classList.add('weak');
                } else if (strength === 2) {
                    strengthBar.classList.add('medium');
                } else if (strength === 3) {
                    strengthBar.classList.add('strong');
                }
            });
        }
        
        // Setup logout button
        function setupLogoutButton() {
            const logoutBtn = document.getElementById('logoutBtn');
            
            logoutBtn.addEventListener('click', function() {
                // Show confirmation
                showToast('Logging out...', 'info');
                
                // Simulate logout process
                setTimeout(() => {
                    // Add logout activity
                    if (currentUser) {
                        database.addActivity({
                            userId: currentUser.id,
                            title: 'Logged Out',
                            description: `${currentUser.name} logged out of the system`
                        });
                    }
                    
                    // Reset current user
                    currentUser = null;
                    userType = null;
                    
                    // Show login screen
                    showAuthScreen();
                    
                    // Reset forms
                    showLoginForm();
                    showSignupForm();
                }, 1000);
            });
        }
        
        // Setup database info panel
        function setupDatabaseInfo() {
            const dbStatus = document.getElementById('dbStatus');
            
            // Show database status
            dbStatus.addEventListener('click', function() {
                const dbInfoPanel = document.getElementById('dbInfoPanel');
                dbInfoPanel.style.display = dbInfoPanel.style.display === 'block' ? 'none' : 'block';
            });
        }
        
        // Toggle database info panel
        function toggleDbInfo() {
            const dbInfoPanel = document.getElementById('dbInfoPanel');
            dbInfoPanel.style.display = dbInfoPanel.style.display === 'block' ? 'none' : 'block';
        }
        
        // Export database data
        function exportDbData() {
            database.exportData();
            showToast('Database exported successfully', 'success');
        }
        
        // Clear database data
        function clearDbData() {
            if (database.clearData()) {
                // If user is logged in, log them out
                if (currentUser) {
                    currentUser = null;
                    userType = null;
                    showAuthScreen();
                    showLoginForm();
                    showSignupForm();
                }
            }
        }
        
        // Show auth screen
        function showAuthScreen() {
            // Show auth container
            document.getElementById('authScreen').style.display = 'flex';
            
            // Hide dashboard container
            document.getElementById('dashboardContainer').style.display = 'none';
        }
        
        // Show dashboard
        function showDashboard() {
            // Hide auth screen
            document.getElementById('authScreen').style.display = 'none';
            
            // Show dashboard container
            document.getElementById('dashboardContainer').style.display = 'block';
            
            // Update user info in sidebar
            updateUserProfile();
            
            // Set greeting based on time of day
            setGreeting();
            
            // Set default dates for leave request
            setDefaultDates();
            
            // Render employee directory
            renderEmployees();
            
            // Render leave requests
            renderLeaveRequests();
            
            // Render payslips
            renderPayslips();
            
            // Render performance reviews
            renderReviews();
            
            // Render job postings
            renderJobPostings();
            
            // Setup navigation
            setupNavigation();
            
            // Setup notification dropdown
            setupNotificationDropdown();
            
            // Setup search functionality
            setupSearch();
            
            // Setup leave tabs
            setupLeaveTabs();
            
            // Setup filters
            setupFilters();
            
            // Show/hide HR-only elements based on user type
            updateUIBasedOnUserRole();
        }
        
        // Update user profile in sidebar
        function updateUserProfile() {
            if (!currentUser) return;
            
            // Update name
            document.getElementById('userName').textContent = currentUser.name;
            
            // Update role
            document.getElementById('userRole').textContent = currentUser.department;
            
            // Update avatar initials
            const initials = currentUser.name.split(' ').map(n => n[0]).join('');
            document.getElementById('userAvatar').textContent = initials;
            
            // Update payslip preview
            document.getElementById('payslipEmployeeName').textContent = currentUser.name;
            document.getElementById('payslipDepartment').textContent = currentUser.department.split(' ')[0];
        }
        
        // Update UI based on user role
        function updateUIBasedOnUserRole() {
            const hrOnlyElements = document.querySelectorAll('.hr-only');
            
            if (userType === 'hr') {
                // Show HR-only elements
                hrOnlyElements.forEach(element => {
                    element.style.display = element.classList.contains('nav-item') ? 'flex' : 'block';
                });
            } else {
                // Hide HR-only elements
                hrOnlyElements.forEach(element => {
                    element.style.display = 'none';
                });
            }
        }
        
        // Set greeting based on time of day
        function setGreeting() {
            const now = new Date();
            const hour = now.getHours();
            let greeting = "Good morning";
            
            if (hour >= 12 && hour < 18) {
                greeting = "Good afternoon";
            } else if (hour >= 18) {
                greeting = "Good evening";
            }
            
            document.getElementById('greeting').textContent = `${greeting}, ${currentUser.name}!`;
        }
        
        // Set default dates for leave request
        function setDefaultDates() {
            const today = new Date();
            const nextWeek = new Date(today);
            nextWeek.setDate(today.getDate() + 7);
            
            const formatDate = (date) => {
                return date.toISOString().split('T')[0];
            };
            
            document.getElementById('startDate').value = formatDate(nextWeek);
            nextWeek.setDate(nextWeek.getDate() + 5);
            document.getElementById('endDate').value = formatDate(nextWeek);
        }
        
        // Setup navigation
        function setupNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    // Remove active class from all nav items and content sections
                    navItems.forEach(navItem => navItem.classList.remove('active'));
                    document.querySelectorAll('.main-content').forEach(content => content.classList.remove('active'));
                    
                    // Add active class to clicked nav item
                    this.classList.add('active');
                    
                    // Show corresponding content section
                    const page = this.getAttribute('data-page');
                    document.getElementById(page).classList.add('active');
                });
            });
        }
        
        // Setup notification dropdown
        function setupNotificationDropdown() {
            const notificationBtn = document.getElementById('notificationBtn');
            const notificationDropdown = document.getElementById('notificationDropdown');
            
            notificationBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                notificationDropdown.style.display = notificationDropdown.style.display === 'block' ? 'none' : 'block';
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function() {
                notificationDropdown.style.display = 'none';
            });
            
            // Prevent dropdown from closing when clicking inside
            notificationDropdown.addEventListener('click', function(e) {
                e.stopPropagation();
            });
            
            // Mark all as read
            notificationDropdown.querySelector('.view-all').addEventListener('click', function() {
                showToast('All notifications marked as read', 'success');
                notificationDropdown.style.display = 'none';
            });
        }
        
        // Setup search functionality
        function setupSearch() {
            // Dashboard search
            const searchInput = document.querySelector('.search-bar input');
            searchInput.addEventListener('keyup', function(e) {
                if (e.key === 'Enter') {
                    const searchTerm = this.value.trim();
                    if (searchTerm) {
                        showToast(`Searching for "${searchTerm}"...`, 'info');
                        // In a real app, this would perform an actual search
                    }
                }
            });
            
            // Employee search
            const employeeSearch = document.getElementById('employeeSearch');
            if (employeeSearch) {
                employeeSearch.addEventListener('keyup', function() {
                    const searchTerm = this.value.toLowerCase();
                    const employeeCards = document.querySelectorAll('.employee-card');
                    
                    employeeCards.forEach(card => {
                        const name = card.querySelector('.employee-name').textContent.toLowerCase();
                        const position = card.querySelector('.employee-position').textContent.toLowerCase();
                        
                        if (name.includes(searchTerm) || position.includes(searchTerm)) {
                            card.style.display = 'flex';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            }
        }
        
        // Setup leave tabs
        function setupLeaveTabs() {
            const leaveTabs = document.querySelectorAll('.leave-tab');
            
            leaveTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs and content
                    leaveTabs.forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.leave-tab-content').forEach(content => content.classList.remove('active'));
                    
                    // Add active class to clicked tab
                    this.classList.add('active');
                    
                    // Show corresponding content
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        }
        
        // Setup filters
        function setupFilters() {
            // Month filter for payslips
            const monthFilter = document.getElementById('monthFilter');
            if (monthFilter) {
                monthFilter.addEventListener('change', function() {
                    renderPayslips();
                });
            }
            
            // Year filter for payslips
            const yearFilter = document.getElementById('yearFilter');
            if (yearFilter) {
                yearFilter.addEventListener('change', function() {
                    renderPayslips();
                });
            }
            
            // Status filter for job postings
            const statusFilter = document.getElementById('statusFilter');
            if (statusFilter) {
                statusFilter.addEventListener('change', function() {
                    renderJobPostings();
                });
            }
            
            // Department filter for job postings
            const departmentFilter = document.getElementById('departmentFilter');
            if (departmentFilter) {
                departmentFilter.addEventListener('change', function() {
                    renderJobPostings();
                });
            }
        }
        
        // Validate login form
        function validateLoginForm(email, password) {
            let isValid = true;
            
            // Validate email
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                document.getElementById('emailError').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('emailError').style.display = 'none';
            }
            
            // Validate password
            if (!password) {
                document.getElementById('passwordError').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('passwordError').style.display = 'none';
            }
            
            return isValid;
        }
        
        // Validate signup form
        function validateSignupForm(fullName, email, password, confirmPassword, department, position, phone) {
            let isValid = true;
            
            // Validate full name
            if (!fullName.trim()) {
                document.getElementById('fullNameError').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('fullNameError').style.display = 'none';
            }
            
            // Validate email
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                document.getElementById('signupEmailError').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('signupEmailError').style.display = 'none';
            }
            
            // Validate password
            const passwordValid = password.length >= 8 && /[A-Z]/.test(password) && /[0-9]/.test(password);
            if (!passwordValid) {
                document.getElementById('signupPasswordError').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('signupPasswordError').style.display = 'none';
            }
            
            // Validate confirm password
            if (password !== confirmPassword) {
                document.getElementById('confirmPasswordError').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('confirmPasswordError').style.display = 'none';
            }
            
            // Validate department (only for employees)
            const userTypeSelection = document.querySelector('.signup-form .user-type-option.active').getAttribute('data-type');
            if (userTypeSelection === 'employee' && !department) {
                document.getElementById('departmentError').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('departmentError').style.display = 'none';
            }
            
            // Validate position (only for employees)
            if (userTypeSelection === 'employee' && !position.trim()) {
                document.getElementById('positionError').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('positionError').style.display = 'none';
            }
            
            // Validate phone
            const phoneRegex = /^\+?[0-9\s\-\(\)]+$/;
            if (!phoneRegex.test(phone)) {
                document.getElementById('phoneError').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('phoneError').style.display = 'none';
            }
            
            return isValid;
        }
        
        // Render employees
        function renderEmployees() {
            const employeeGrid = document.getElementById('employeeGrid');
            if (!employeeGrid) return;
            
            employeeGrid.innerHTML = '';
            
            const employees = database.getAllEmployees();
            
            employees.forEach(employee => {
                const initials = employee.name.split(' ').map(n => n[0]).join('');
                
                const employeeCard = document.createElement('div');
                employeeCard.className = 'employee-card';
                employeeCard.innerHTML = `
                    <div class="employee-avatar">${initials}</div>
                    <div class="employee-name">${employee.name}</div>
                    <div class="employee-position">${employee.position}</div>
                    <div class="employee-details">
                        <div class="employee-detail">
                            <i class="fas fa-building"></i>
                            <span>${employee.department}</span>
                        </div>
                        <div class="employee-detail">
                            <i class="fas fa-envelope"></i>
                            <span>${employee.email}</span>
                        </div>
                        <div class="employee-detail">
                            <i class="fas fa-phone"></i>
                            <span>${employee.phone}</span>
                        </div>
                    </div>
                    <div class="employee-actions">
                        <button class="btn-message" onclick="messageEmployee(${employee.id})">Message</button>
                        <button class="btn-view" onclick="viewEmployee(${employee.id})">View</button>
                    </div>
                `;
                
                employeeGrid.appendChild(employeeCard);
            });
            
            // Update employee count
            document.getElementById('totalEmployees').textContent = employees.length;
        }
        
        // Render leave requests
        function renderLeaveRequests() {
            // My leave requests
            const myLeaveRequests = document.getElementById('myLeaveRequests');
            if (myLeaveRequests) {
                myLeaveRequests.innerHTML = '';
                
                const leaveRequests = database.getLeaveRequestsByUserId(currentUser.id);
                
                leaveRequests.forEach(request => {
                    const startDate = new Date(request.startDate);
                    const endDate = new Date(request.endDate);
                    const formattedStartDate = startDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                    const formattedEndDate = endDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                    
                    const requestItem = document.createElement('div');
                    requestItem.className = 'leave-request-item';
                    requestItem.innerHTML = `
                        <div class="leave-request-info">
                            <h4>${request.type}</h4>
                            <p>${formattedStartDate} - ${formattedEndDate} (${request.days} days)</p>
                            <span class="status-badge ${request.status === 'Approved' ? 'status-approved' : 'status-pending'}">${request.status}</span>
                        </div>
                        <div class="leave-request-actions">
                            ${request.status === 'Pending' && userType === 'hr' ? `
                                <button class="btn-approve" onclick="updateLeaveStatus(${request.id}, 'Approved')">Approve</button>
                                <button class="btn-reject" onclick="updateLeaveStatus(${request.id}, 'Rejected')">Reject</button>
                            ` : ''}
                        </div>
                    `;
                    
                    myLeaveRequests.appendChild(requestItem);
                });
            }
            
            // Team leave requests
            const teamLeaveRequests = document.getElementById('teamLeaveRequests');
            if (teamLeaveRequests && userType === 'hr') {
                teamLeaveRequests.innerHTML = '';
                
                const allLeaveRequests = database.getAllLeaveRequests();
                
                allLeaveRequests.forEach(request => {
                    // Skip current user's requests
                    if (request.userId === currentUser.id) return;
                    
                    const startDate = new Date(request.startDate);
                    const endDate = new Date(request.endDate);
                    const formattedStartDate = startDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                    const formattedEndDate = endDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                    
                    const user = database.getUser(database.getUserById(request.userId)?.email);
                    const employeeName = user ? user.name : 'Unknown';
                    
                    const requestItem = document.createElement('div');
                    requestItem.className = 'leave-request-item';
                    requestItem.innerHTML = `
                        <div class="leave-request-info">
                            <h4>${employeeName} - ${request.type}</h4>
                            <p>${formattedStartDate} - ${formattedEndDate} (${request.days} days)</p>
                            <span class="status-badge ${request.status === 'Approved' ? 'status-approved' : 'status-pending'}">${request.status}</span>
                        </div>
                        <div class="leave-request-actions">
                            ${request.status === 'Pending' ? `
                                <button class="btn-approve" onclick="updateTeamLeaveStatus(${request.id}, 'Approved')">Approve</button>
                                <button class="btn-reject" onclick="updateTeamLeaveStatus(${request.id}, 'Rejected')">Reject</button>
                            ` : ''}
                        </div>
                    `;
                    
                    teamLeaveRequests.appendChild(requestItem);
                });
            }
        }
        
        // Render payslips
        function renderPayslips() {
            const payslipList = document.getElementById('payslipList');
            if (!payslipList) return;
            
            payslipList.innerHTML = '';
            
            // Get filter values
            const monthFilter = document.getElementById('monthFilter').value;
            
            // Get payslips for current user
            let payslips = database.getPayslipsByUserId(currentUser.id);
            
            // Filter payslips based on selected month
            if (monthFilter !== 'All Months') {
                payslips = payslips.filter(payslip => payslip.month.includes(monthFilter));
            }
            
            payslips.forEach(payslip => {
                const payslipItem = document.createElement('div');
                payslipItem.className = 'payslip-item';
                payslipItem.innerHTML = `
                    <div class="payslip-info">
                        <h4>${payslip.month}</h4>
                        <p>Payment Date: ${payslip.date}</p>
                    </div>
                    <div class="payslip-amount">${payslip.amount}</div>
                    <div class="payslip-actions">
                        <button class="btn btn-primary" onclick="viewPayslip(${payslip.id})">View</button>
                        <button class="btn btn-secondary" onclick="downloadPayslipById(${payslip.id})">Download</button>
                    </div>
                `;
                
                payslipList.appendChild(payslipItem);
            });
        }
        
        // Render performance reviews
        function renderReviews() {
            const reviewList = document.getElementById('reviewList');
            if (!reviewList) return;
            
            reviewList.innerHTML = '';
            
            // Get reviews for current user
            const reviews = database.getReviewsByEmployeeId(currentUser.id);
            
            reviews.forEach(review => {
                const stars = '★'.repeat(review.rating) + '☆'.repeat(5 - review.rating);
                
                const reviewItem = document.createElement('div');
                reviewItem.className = 'review-item';
                reviewItem.innerHTML = `
                    <div class="review-header">
                        <div class="review-title">Review by ${database.getUserById(review.reviewerId)?.name || 'Unknown'}</div>
                        <div class="review-date">${review.date}</div>
                    </div>
                    <div class="review-rating">
                        ${stars.split('').map(star => `<i class="fas fa-star${star === '☆' ? '-o' : ''}" style="color: #fbbf24;"></i>`).join('')}
                    </div>
                    <div class="review-comments">${review.comments}</div>
                `;
                
                reviewList.appendChild(reviewItem);
            });
        }
        
        // Render job postings
        function renderJobPostings() {
            const jobList = document.getElementById('jobList');
            if (!jobList) return;
            
            jobList.innerHTML = '';
            
            // Get filter values
            const statusFilter = document.getElementById('statusFilter').value;
            const departmentFilter = document.getElementById('departmentFilter').value;
            
            // Get all job postings
            let jobPostings = database.getAllJobPostings();
            
            // Filter job postings based on selected filters
            if (statusFilter !== 'All Statuses') {
                jobPostings = jobPostings.filter(job => job.status === statusFilter);
            }
            
            if (departmentFilter !== 'All Departments') {
                jobPostings = jobPostings.filter(job => job.department === departmentFilter);
            }
            
            jobPostings.forEach(job => {
                const jobItem = document.createElement('div');
                jobItem.className = 'job-item';
                jobItem.innerHTML = `
                    <div class="job-header">
                        <div class="job-title">${job.title}</div>
                        <div class="job-department">${job.department}</div>
                    </div>
                    <div class="job-details">
                        <div class="job-detail">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>${job.location}</span>
                        </div>
                        <div class="job-detail">
                            <i class="fas fa-briefcase"></i>
                            <span>${job.type}</span>
                        </div>
                        <div class="job-detail">
                            <i class="fas fa-calendar"></i>
                            <span>Posted: ${job.posted}</span>
                        </div>
                    </div>
                    <div class="job-description">
                        ${job.description}
                    </div>
                    <div class="job-actions">
                        <button class="btn btn-primary" onclick="viewApplications(${job.id})">View Applications</button>
                        <button class="btn btn-secondary" onclick="editJob(${job.id})">Edit</button>
                        ${job.status === 'Open' ? `<button class="btn btn-secondary" onclick="closeJob(${job.id})">Close</button>` : ''}
                    </div>
                `;
                
                jobList.appendChild(jobItem);
            });
            
            // Update open positions count
            const openPositions = jobPostings.filter(job => job.status === 'Open').length;
            document.getElementById('openPositions').textContent = openPositions;
        }
        
        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }
        
        // Toast notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            const toastIcon = toast.querySelector('.toast-icon i');
            
            // Set message
            toastMessage.textContent = message;
            
            // Set type
            toast.className = 'toast';
            toast.classList.add(`toast-${type}`);
            
            // Set icon
            if (type === 'success') {
                toastIcon.className = 'fas fa-check-circle';
            } else if (type === 'error') {
                toastIcon.className = 'fas fa-exclamation-circle';
            } else if (type === 'info') {
                toastIcon.className = 'fas fa-info-circle';
            }
            
            // Show toast
            toast.classList.add('show');
            
            // Hide toast after 3 seconds
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // Action functions
        function submitLeaveRequest() {
            const leaveType = document.getElementById('leaveType').value;
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            const reason = document.getElementById('leaveReason').value;
            
            if (!startDate || !endDate || !reason) {
                showToast('Please fill in all required fields', 'error');
                return;
            }
            
            // Calculate days
            const start = new Date(startDate);
            const end = new Date(endDate);
            const days = Math.ceil((end - start) / (1000 * 60 * 60 * 24)) + 1;
            
            // Add to leave requests
            const newRequest = database.addLeaveRequest({
                userId: currentUser.id,
                type: leaveType,
                startDate: startDate,
                endDate: endDate,
                status: 'Pending',
                days: days,
                reason: reason
            });
            
            // Update UI
            renderLeaveRequests();
            
            // Show success message
            showToast('Leave request submitted successfully!', 'success');
            
            // Close modal
            closeModal('leaveModal');
            
            // Add to activity list
            database.addActivity({
                userId: currentUser.id,
                title: 'Leave request submitted',
                description: `You requested ${leaveType} from ${formatDate(startDate)}-${formatDate(endDate)}`
            });
            
            // Update pending requests count
            updatePendingRequestsCount();
        }
        
        function downloadPayslip() {
            const month = document.getElementById('payslipMonth').value;
            showToast(`Downloading payslip for ${month}...`, 'info');
            
            // Simulate download
            setTimeout(() => {
                showToast('Payslip downloaded successfully!', 'success');
                closeModal('payslipModal');
                
                // Add to activity list
                database.addActivity({
                    userId: currentUser.id,
                    title: 'Payslip downloaded',
                    description: `You downloaded your ${month} payslip`
                });
            }, 1500);
        }
        
        function downloadPayslipById(id) {
            const payslip = database.getPayslip(id);
            if (payslip) {
                showToast(`Downloading payslip for ${payslip.month}...`, 'info');
                
                // Simulate download
                setTimeout(() => {
                    showToast('Payslip downloaded successfully!', 'success');
                    
                    // Add to activity list
                    database.addActivity({
                        userId: currentUser.id,
                        title: 'Payslip downloaded',
                        description: `You downloaded your ${payslip.month} payslip`
                    });
                }, 1500);
            }
        }
        
        function viewPayslip(id) {
            const payslip = database.getPayslip(id);
            if (payslip) {
                openModal('payslipModal');
                document.getElementById('payslipMonth').value = payslip.month;
            }
        }
        
        function updateProfile() {
            const fullName = document.getElementById('fullName').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const address = document.getElementById('address').value;
            
            if (!fullName || !email || !phone) {
                showToast('Please fill in all required fields', 'error');
                return;
            }
            
            // Update user info in database
            database.updateUser(currentUser.email, {
                name: fullName,
                phone: phone,
                address: address
            });
            
            // Update user info in sidebar
            document.querySelector('.user-info .name').textContent = fullName;
            document.querySelector('.avatar').textContent = fullName.split(' ').map(n => n[0]).join('');
            
            // Update current user
            currentUser.name = fullName;
            currentUser.phone = phone;
            currentUser.address = address;
            
            // Show success message
            showToast('Profile updated successfully!', 'success');
            
            // Close modal
            closeModal('profileModal');
            
            // Add to activity list
            database.addActivity({
                userId: currentUser.id,
                title: 'Profile updated',
                description: 'You updated your contact information'
            });
        }
        
        function downloadPolicy() {
            const category = document.getElementById('policyCategory').value;
            showToast(`Downloading ${category} document...`, 'info');
            
            // Simulate download
            setTimeout(() => {
                showToast('Policy document downloaded successfully!', 'success');
                closeModal('policyModal');
            }, 1500);
        }
        
        function addEmployee() {
            const name = document.getElementById('newEmployeeName').value;
            const email = document.getElementById('newEmployeeEmail').value;
            const position = document.getElementById('newEmployeePosition').value;
            const department = document.getElementById('newEmployeeDepartment').value;
            const phone = document.getElementById('newEmployeePhone').value;
            
            if (!name || !email || !position || !phone) {
                showToast('Please fill in all required fields', 'error');
                return;
            }
            
            // Check if email already exists
            if (database.getUser(email)) {
                showToast('Employee with this email already exists', 'error');
                return;
            }
            
            // Add to employees array
            const newEmployee = database.addEmployee({
                name: name,
                position: position,
                department: department,
                email: email,
                phone: phone,
                hireDate: new Date()
            });
            
            // Update UI
            renderEmployees();
            
            // Show success message
            showToast('Employee added successfully!', 'success');
            
            // Close modal
            closeModal('addEmployeeModal');
            
            // Add to activity list
            database.addActivity({
                userId: currentUser.id,
                title: 'New employee added',
                description: `${name} was added to the ${department} department`
            });
        }
        
        function messageEmployee(id) {
            const employee = database.getEmployee(id);
            if (employee) {
                showToast(`Opening message to ${employee.name}...`, 'info');
                // In a real app, this would open a messaging interface
            }
        }
        
        function viewEmployee(id) {
            const employee = database.getEmployee(id);
            if (employee) {
                showToast(`Viewing details for ${employee.name}...`, 'info');
                // In a real app, this would open a detailed employee view
            }
        }
        
        function updateLeaveStatus(id, status) {
            const request = database.getLeaveRequest(id);
            if (request) {
                database.updateLeaveRequest(id, { status: status });
                renderLeaveRequests();
                showToast(`Leave request ${status.toLowerCase()}!`, 'success');
                
                // Add to activity list
                database.addActivity({
                    userId: currentUser.id,
                    title: `Leave request ${status}`,
                    description: `Your ${request.type} request was ${status.toLowerCase()}`
                });
            }
        }
        
        function updateTeamLeaveStatus(id, status) {
            const request = database.getLeaveRequest(id);
            if (request) {
                database.updateLeaveRequest(id, { status: status });
                renderLeaveRequests();
                showToast(`Leave request ${status.toLowerCase()}!`, 'success');
            }
        }
        
        function runPayroll() {
            const month = document.getElementById('payrollMonth').value;
            const type = document.getElementById('payrollType').value;
            const notes = document.getElementById('payrollNotes').value;
            
            showToast(`Running ${type} payroll for ${month}...`, 'info');
            
            // Simulate payroll run
            setTimeout(() => {
                showToast('Payroll processed successfully!', 'success');
                closeModal('payrollRunModal');
                
                // Add to activity list
                database.addActivity({
                    userId: currentUser.id,
                    title: 'Payroll processed',
                    description: `${type} payroll for ${month} was processed`
                });
            }, 1500);
        }
        
        function submitReview() {
            const employeeId = document.getElementById('reviewEmployee').value;
            const type = document.getElementById('reviewType').value;
            const rating = document.getElementById('reviewRating').value;
            const comments = document.getElementById('reviewComments').value;
            
            if (!employeeId || !comments) {
                showToast('Please fill in all required fields', 'error');
                return;
            }
            
            // Get employee ID from name
            const employeeName = document.getElementById('reviewEmployee').value;
            const employee = database.getAllEmployees().find(e => e.name === employeeName);
            
            if (!employee) {
                showToast('Employee not found', 'error');
                return;
            }
            
            // Add to reviews array
            const newReview = database.addReview({
                employeeId: employee.id,
                reviewerId: currentUser.id,
                date: new Date().toISOString().split('T')[0],
                rating: parseInt(rating[0]),
                comments: comments
            });
            
            // Update UI
            renderReviews();
            
            // Show success message
            showToast('Performance review submitted successfully!', 'success');
            
            // Close modal
            closeModal('reviewModal');
            
            // Add to activity list
            database.addActivity({
                userId: currentUser.id,
                title: 'Performance review submitted',
                description: `${type} review for ${employeeName} was submitted`
            });
        }
        
        function postJob() {
            const title = document.getElementById('jobTitle').value;
            const department = document.getElementById('jobDepartment').value;
            const location = document.getElementById('jobLocation').value;
            const type = document.getElementById('jobType').value;
            const description = document.getElementById('jobDescription').value;
            
            if (!title || !department || !location || !description) {
                showToast('Please fill in all required fields', 'error');
                return;
            }
            
            // Add to job postings array
            const newJob = database.addJobPosting({
                title: title,
                department: department,
                location: location,
                type: type,
                posted: new Date().toISOString().split('T')[0],
                status: "Open",
                description: description
            });
            
            // Update UI
            renderJobPostings();
            
            // Show success message
            showToast('Job posting created successfully!', 'success');
            
            // Close modal
            closeModal('jobPostingModal');
            
            // Add to activity list
            database.addActivity({
                userId: currentUser.id,
                title: 'New job posting',
                description: `${title} position in ${department} department was posted`
            });
        }
        
        function viewApplications(id) {
            const job = database.getJobPosting(id);
            if (job) {
                showToast(`Viewing applications for ${job.title}...`, 'info');
                // In a real app, this would open a list of applications
            }
        }
        
        function editJob(id) {
            const job = database.getJobPosting(id);
            if (job) {
                showToast(`Editing ${job.title} position...`, 'info');
                // In a real app, this would open an edit form
            }
        }
        
        function closeJob(id) {
            const job = database.getJobPosting(id);
            if (job) {
                database.updateJobPosting(id, { status: 'Closed' });
                renderJobPostings();
                
                showToast(`${job.title} position closed successfully!`, 'success');
                
                // Add to activity list
                database.addActivity({
                    userId: currentUser.id,
                    title: 'Job posting closed',
                    description: `${job.title} position was closed`
                });
            }
        }
        
        // Helper functions
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
        }
        
        function updatePendingRequestsCount() {
            const pendingCount = database.getLeaveRequestsByUserId(currentUser.id)
                .filter(r => r.status === 'Pending').length;
            document.getElementById('pendingRequests').textContent = pendingCount;
        }
        
        // Helper function to get user by ID
        database.getUserById = function(id) {
            for (const [email, user] of this.users.entries()) {
                if (user.id === id) {
                    return user;
                }
            }
            return null;
        };
    </script>
</body>
</html>